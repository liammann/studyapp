requirejs.config({baseUrl:"/",paths:{app:"/"}});require(["libs/text!header.html","libs/text!home.html","libs/text!footer.html","libs/text!Task.html","libs/text!sidebar.html"],function(e,t,n,r,i){var s=Backbone.Router.extend({routes:{"":"tasks",":id":"unit"},initialize:function(){this.headerView=new HeaderView;this.headerView.render();this.footerView=new FooterView;this.footerView.render()},unit:function(){this.sidebarView=new SidebarView;this.sidebarView.render();this.unitView=new UnitView;this.unitView.render()},tasks:function(){this.sidebarView=new SidebarView;this.sidebarView.render();this.taskView=new TasksView;this.taskView.render()}});HeaderView=Backbone.View.extend({el:"#header",templateFileName:"header.html",template:e,initialize:function(){},render:function(){$(this.el).html(_.template(this.template))}});FooterView=Backbone.View.extend({el:"#footer",template:n,render:function(){this.$el.html(_.template(this.template))}});var o=Backbone.Model.extend({defaults:{name:"unit 1",colour:0}});UnitsCollection=Backbone.Collection.extend({model:o,url:"/test/Units"});SidebarView=Backbone.View.extend({el:"#sidebar",template:i,render:function(){var e=this,t=new UnitsCollection;t.fetch({error:function(e,t,n){console.log("membersview fetch onerrorhandler");alert(t.responseText)},success:function(t){$(e.el).html(_.template(e.template,{units:t.models,_:_}))}})}});var u=Backbone.Model.extend({urlRoot:"/test/Tasks",completed:function(e){this.save(e,{patch:!0})}});TasksCollection=Backbone.Collection.extend({model:u,url:"/test/Tasks"});var a=new u,f=new TasksCollection({model:a});UnitView=Backbone.View.extend({el:"#content",template:i,render:function(){var e=this;f.fetch({error:function(e,t,n){console.log("membersview fetch onerrorhandler");alert(t.responseText)},success:function(t){var n=t.where({unit:"22"});console.log(n);$(e.el).html(_.template(e.template,{units:n.models,_:_}))}})}});TasksView=Backbone.View.extend({el:"#content",model:a,template:r,initialize:function(){this.first=[];this.currentTarget=[];this.model.bind("change",this.render)},events:{"click .notes-btn":"slideDown","click .sub-btn":"slideDown","click .hours-btn":"slideDown","click .completed":"completed"},completed:function(e){console.log(e.target.parentNode.parentNode.attributes[0].value);var t=f.get(e.target.parentNode.parentNode.attributes[0].value);t.completed({open:!1})},slideDown:function(e){var t=e.target.parentNode.parentNode.attributes[0].value;if(this.currentTarget[t]===e.target&&!this.first[t]){$("#"+e.currentTarget.attributes[0].value).slideUp();$(this.currentTarget[t]).removeClass("active");$(this.currentTarget[t].parentNode).removeClass("open");this.first[t]=!0}else{if($(e.target.parentNode).hasClass("open")){$("#"+this.currentTarget[t].attributes[0].value).slideUp();$(this.currentTarget[t]).removeClass("active");$("#"+e.currentTarget.attributes[0].value).slideDown();$(e.target).addClass("active")}else{$(e.target.parentNode).addClass("open");$("#"+e.currentTarget.attributes[0].value).slideDown();$(e.target).addClass("active")}this.currentTarget[t]=e.target;this.first[t]=!1}},render:function(){var e=this;f.fetch({success:function(t){$(e.el).html(_.template(e.template,{tasks:t.models,_:_}))}})}});app=new s;Backbone.history.start({pushState:!0,root:"/"})});$(document).on("click","a",function(e){var t=$(e.currentTarget).attr("href"),n=Backbone.history.navigate(t,!0);n&&e.preventDefault()});